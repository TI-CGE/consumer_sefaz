# Configurações de Logging Otimizado
logging:
  # Configurações de limpeza automática
  cleanup:
    enabled: true
    max-age-days: 7          # Remove logs mais antigos que 7 dias
    max-size-mb: 500         # Alerta quando logs excedem 500MB
    schedule: "0 0 2 * * ?"  # Executa às 2:00 AM diariamente
  
  # Configurações de otimização
  optimization:
    enabled: true
    max-duplicate-interval-minutes: 5  # Suprime duplicatas por 5 minutos
    max-logs-per-session: 1000        # Máximo de logs por sessão
    cleanup-interval-hours: 1         # Limpeza de cache a cada hora
  
  # Configurações de rotação mais agressivas
  rotation:
    max-file-size: 50MB      # Rotaciona arquivos menores
    max-history: 15          # Mantém menos histórico
    total-size-cap: 1GB      # Limite total menor
  
  # Níveis de log por ambiente
  levels:
    br.gov.se.setc.logging: INFO
    br.gov.se.setc.consumer: WARN    # Reduz verbosidade do consumer
    br.gov.se.setc.scheduler: INFO
    org.springframework: WARN        # Reduz logs do Spring
    org.hibernate: WARN              # Reduz logs do Hibernate
    com.zaxxer.hikari: WARN          # Reduz logs do pool de conexão
  
  # Configurações específicas por perfil
  profiles:
    dev:
      cleanup:
        max-age-days: 3      # Limpeza mais frequente em dev
        max-size-mb: 100
      optimization:
        max-logs-per-session: 500
    
    prod:
      cleanup:
        max-age-days: 30     # Mantém mais histórico em prod
        max-size-mb: 2000
      optimization:
        max-logs-per-session: 2000
      levels:
        br.gov.se.setc: WARN # Menos verboso em produção
    
    test:
      cleanup:
        enabled: false       # Não limpa logs em testes
      optimization:
        enabled: false       # Não otimiza em testes

# Configurações específicas do Logback
logback:
  async:
    queue-size: 512          # Tamanho da fila assíncrona
    discarding-threshold: 0  # Não descarta logs
    max-flush-time: 5000     # Tempo máximo para flush
  
  compression:
    enabled: true            # Habilita compressão
    format: gz              # Formato de compressão
  
  buffer:
    size: 8192              # Tamanho do buffer de escrita
    flush-interval: 1000    # Intervalo de flush em ms
